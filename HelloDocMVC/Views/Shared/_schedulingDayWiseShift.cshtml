@model DAL_Data_Access_Layer_.CustomeModel.DayShiftModal;

<div class="table-responsive">
    <table class="table" style="width:100%;z-index:5">
        <thead id="dayshiftheader" class="dayshiftheader">
            <tr>
                <th>STAFF</th>
                <th>12A</th>
                <th>1A</th>
                <th>2A</th>
                <th>3A</th>
                <th>4A</th>
                <th>5A</th>
                <th>6A</th>
                <th>7A</th>
                <th>8A</th>
                <th>9A</th>
                <th>10A</th>
                <th>11A</th>
                <th>12P</th>
                <th>1P</th>
                <th>2P</th>
                <th>3P</th>
                <th>4P</th>
                <th>5P</th>
                <th>6P</th>
                <th>7P</th>
                <th>8P</th>
                <th>9P</th>
                <th>10P</th>
                <th>11P</th>
            </tr>
        </thead>
        <tbody id="dayshiftbody" class="mt-1">
            <tr>
                <td class="text-center">coverage</td>
                @for (int i = 0; i < 24; i += 1)
                {
                    <td style="background-color:#cfcff9;"></td>
                }
            </tr>

            @{
                foreach (var phy in Model.Physicians)
                {
                    <tr>
                        <td class="p-2">@phy.Firstname @phy.Lastname</td>

                        @{
                            var list = Model.shiftDetailsmodals.Where(u => u.Physicianid == phy.Physicianid).ToList();

                            for (int i = 0; i < 24; i += 1)
                            {
                                var flag = 0;

                                foreach (var shift in list)
                                {
                                    var bgcolor = "";

                                    if (shift.Status == 1)
                                    {
                                        bgcolor = "lightpink";
                                    }
                                    else if (shift.Status == 2)
                                    {
                                        bgcolor = "lightgreen";
                                    }
                                    flag = 1;
                                    if (shift.Starttime.Hour == i)
                                    {
                                        var col = shift.Endtime.Hour - shift.Starttime.Hour;
                                        var min = shift.Endtime.Minute;
                                        if (min > 0)
                                        {
                                            col = col + 1;
                                        }
                                        <td colspan="@col" style="background-color:@bgcolor;" onclick="providersModal({actionType:'shiftdetails',shiftdetailsid : '@shift.Shiftdetailid'})">

                                            @shift.Starttime - @shift.Endtime  @shift.Abberaviation

                                        </td>
                                        i += col - 1;
                                    }
                                    else
                                    {
                                        <td></td>
                                    }
                                }
                                if (flag == 0)
                                {
                                    <td></td>
                                }

                            }
                        }

                    </tr>
                }
            }



        </tbody>
    </table>

</div>

<script>
    function providersModal(DataObject) {

        DataObject.datestring = date.toISOString();

        $.ajax({
            url: '/adminDashboard/OpenScheduledModal',
            type: 'Post',
            data: DataObject,
            success: function (data) {
                $('#schedulingModals').html(data);
                $('#ViewScheduledModal').modal('show');
            },
            error: function (e) {
                console.log(e);
            }
        });
    }
</script>