@model DAL_Data_Access_Layer_.CustomeModel.recordsModel;<link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css" />@functions {    public string GetStatusName(int status)
    {
        switch (status)
        {
            case 1: return "Unassigned";
            case 2: return "Accepted";
            case 3: return "Cancelled";
            case 4: return "MDEnRoute";
            case 5: return "MDOnSite";
            case 6: return "Conclude";
            case 7: return "Cancelled By Patient";
            case 8: return "Closed";
            case 9: return "Unpaid";
            case 10: return "Clear";
            default: return "-";
        }
    }}<div class="w-100 px-3 pb-3 px-sm-5">    <div class="d-flex justify-content-between align-items-center mb-3">        <h4>Search Records</h4>        <button class="btn btn-info rounded-2 text-white" onclick="ScheduleExportAll()">            <i class="bi bi-share"></i> <span class="d-none d-sm-inline-block">Export Data to Excel</span>        </button>    </div>    <div class="shadow border rounded mt-2 mb-3">        <form onsubmit="searchRecordSearchBtn()" class="p-3" id="searchRecordForm">            <div class="row g-3">                @*ONE*@                <div class="form-floating col-sm-6 col-md-3 col-lg-3 col-xl-3">                    <select id="status" class="form-select" aria-label="Default select example"                            asp-for="@Model.requestListMain[0].searchRecordOne">                        <option selected value="0">All</option>                        @for (var i = 1; i <= 9; i++)
                        {                            <option value="@i">                                @GetStatusName(i)                            </option>                        }                    </select>                    <label class="text-muted ms-2">Status</label>                </div>                @*TWO*@                <div class="form-floating col-sm-6 col-md-3 col-lg-3 col-xl-3">                    <input class="form-control" type="search" placeholder="Patient Name" aria-label="Search"                           id="patient_name" asp-for="@Model.requestListMain[0].searchRecordTwo">                    <label class="text-muted ms-2">Patient Name</label>                </div>                @*THREE*@                <div class="form-floating col-sm-6 col-md-3 col-lg-3 col-xl-3">                    <select id="request_type" class="form-select" aria-label="Default select example"                            asp-for="@Model.requestListMain[0].searchRecordThree">                        <option selected value="0">All</option>                        <option value="1">Patient</option>                        <option value="2">Family/Friend</option>                        <option value="3">Concierge</option>                        <option value="4">Bussiness</option>                    </select>                    <label class="text-muted ms-2">Request Type</label>                </div>                @*FOUR*@                <div class="form-floating  col-sm-6 col-md-3 col-lg-3 col-xl-3">                    <input type="date" class="form-control bg-transparent" id="from_dateofService"                           placeholder="From Date of Service" asp-for="@Model.requestListMain[0].searchRecordFour">                    <label for="datePickerId" class="ms-2 text-muted">From Date of Service</label>                </div>                @*FIVE*@                <div class="form-floating  col-sm-6 col-md-3 col-lg-3 col-xl-3">                    <input type="date" class="form-control bg-transparent" id="to_dateofService"                           placeholder="To Date of Service" asp-for="@Model.requestListMain[0].searchRecordFive">                    <label for="datePickerId" class="ms-2 text-muted">To Date of Service</label>                </div>                @*SIX*@                <div class="form-floating col-sm-6 col-md-3 col-lg-3 col-xl-3">                    <input class="form-control" type="search" placeholder="Provider Name" aria-label="Search"                           id="physician" asp-for="@Model.requestListMain[0].searchRecordSix">                    <label class="text-muted ms-2">Physician Name</label>                </div>                @*SEVEN*@                <div class="form-floating col-sm-6 col-md-3 col-lg-3 col-xl-3">                    <input class="form-control" type="search" placeholder="Email" aria-label="Search" id="email"                           asp-for="@Model.requestListMain[0].searchRecordSeven">                    <label class="text-muted ms-2">Email</label>                </div>                @*EIGHT*@                <div class="form-floating col-sm-6 col-md-3 col-lg-3 col-xl-3">                    <input class="form-control" type="search" placeholder="Phone Number" aria-label="Search" id="phone"                           asp-for="@Model.requestListMain[0].searchRecordEight">                    <label class="text-muted ms-2">Phone Number</label>                </div>                <div class="d-flex justify-content-end mb-3">                    <button id="cancel_button" type="button" onclick="searchRecords()" class="btn btn-outline-info rounded-2 me-2">                        Clear                    </button>                    <button id="search_button" type="submit"                            class="btn btn-info text-white rounded-2 ms-2">                        Search                    </button>                </div>            </div>        </form>        @if (Model.requestListMain[0].flag != 1)
        {            <div class="table-responsive d-none d-lg-block p-lg-3" style="min-height:50vh">                <table id="searchRecordTable" class="table mt-3 searchRecordTable">                    <thead class="table-active">                        <tr class="">                            <th class="col">Patient Name</th>                            <th class="col">Requestor</th>                            <th class="col">Date of Service</th>                            <th class="col">Close Case Date</th>                            <th class="col">Email</th>                            <th class="col">Phone Number</th>                            <th class="col">Address</th>                            <th class="col">Zip</th>                            <th class="col">Request Status</th>                            <th class="col">Physician</th>                            <th class="col">Physician Notes</th>                            <th class="col">Cancelled by Provider Note</th>                            <th class="col">Admin Note</th>                            <th class="col">Patient Note</th>                            <th class="col">Delete Permanently</th>                        </tr>                    </thead>                    <tbody>                        @foreach (var obj in Model.requestListMain)
                        {                            <tr class="text-center">                                <td>@obj.patientname</td>                                <td>@obj.requestor</td>                                <td>Date Of Service</td>                                <td>Close Case Date</td>                                <td>@obj.email</td>                                <td>@obj.contact</td>                                <td>@obj.address</td>                                <td>@obj.zip</td>                                <td>@GetStatusName((int)obj.statusId)</td>                                <td>@obj.physician</td>                                <td>@obj.physicianNote</td>                                <td>Cancelled by Provider Note</td>                                <td>@obj.AdminNote</td>                                <td>@obj.pateintNote</td>                                <td>                                    <button class="btn btn-outline-info" onclick="recordDltBtn(@obj.requestid)">Delete</button>                                </td>                            </tr>                        }                    </tbody>                </table>            </div>            <div class="d-block d-lg-none ">                <div class="accordion container-fluid p-0" id="accordionPanelsStayOpenExample">                    <table class="w-100 searchRecordTable" id="searchRecordTable">                        <thead>                            <tr>                                <th class="d-none"></th>                                <th class="d-none"></th>                            </tr>                        </thead>                        @{                            var counter = 1;                        }                        <tbody>                            @if (Model.requestListMain != null)
                            {                                @foreach (var obj in Model.requestListMain)
                                {                                    <tr class="d-flex flex-column">                                        <td>                                            <h2 class="accordion-header" id="flush-heading@(counter)"></h2>                                            <div class="accordion-button collapsed d-flex flex-column pb-0"                                                 data-bs-toggle="collapse" data-bs-target="#flush-collapse@(counter)"                                                 aria-expanded="false" aria-controls="flush-collapse@(counter)">                                                <div class="w-100 ">                                                    <span class="fw-bolder">                                                        @obj.patientname                                                    </span>                                                </div>                                                <div class="w-100">                                                    <div class="">                                                        @obj.address                                                    </div>                                                </div>                                            </div>                                        </td>                                        <td>                                            <div id="flush-collapse@(counter)" class="accordion-collapse collapse"                                                 aria-labelledby="flush-heading@(counter)" data-bs-parent="#accordionFlushExample">                                                <div class="accordion-body main-flex pt-2">                                                    <div class="w-100">                                                        <div class="">                                                            <span class="fw-bolder">Requestor: </span> @obj.requestor                                                        </div>                                                        <div class="">                                                            <span class="fw-bolder">Date of service: </span> date of services                                                        </div>                                                        <div class="">                                                            <span class="fw-bolder">Case Closed Date: </span> Case Closed Date                                                        </div>                                                        <div class="">                                                            <span class="fw-bolder">Email: </span>                                                            <spna class="mobile-font2">@obj.email</spna>                                                        </div>                                                        <div class="">                                                            <span class="fw-bolder">Phone: </span> @obj.contact                                                        </div>                                                        <div class="">                                                            <span class="fw-bolder">Address: </span> @obj.address                                                        </div>                                                        <div class="">                                                            <span class="fw-bolder">ZipCode: </span> @obj.zip                                                        </div>                                                        <div class="">                                                            <span class="fw-bolder">Request Status: </span>                                                            @GetStatusName((int)obj.statusId)                                                        </div>                                                        <div class="">                                                            <span class="fw-bolder">provider: </span> provider                                                        </div>                                                        <div class="">                                                            <span class="fw-bolder">provider Note: </span> @obj.providerNote                                                        </div>                                                        <div class="">                                                            <span class="fw-bolder">Canceled By Provider: </span> cancel by provider                                                        </div>                                                        <div class="">                                                            <span class="fw-bolder">Admin Note: </span> @obj.AdminNote                                                        </div>                                                        <div class="">                                                            <span class="fw-bolder">Cancelation Reason: </span> cancel Reason                                                        </div>                                                        <div class="">                                                            <span class="fw-bolder">Patient Note: </span> @obj.pateintNote                                                        </div>                                                    </div>                                                    <div class="inner-flex d-flex justify-content-end">                                                        <button onclick="recordDltBtn(@obj.requestid)"                                                                class="btn btn-outline-info">                                                            Delete                                                        </button>                                                    </div>                                                </div>                                            </div>                                        </td>                                    </tr>                                    counter++;
                                }                            }                        </tbody>                    </table>                </div>            </div>        }
        else
        {            <table class="table">                <thead class="table-active">                    <tr class="dark-mode2">                        <th class="col">Patient Name</th>                        <th class="col">Requestor</th>                        <th class="col">Date of Service</th>                        <th class="col">Close Case Date</th>                        <th class="col">Email</th>                        <th class="col">Phone Number</th>                        <th class="col">Address</th>                        <th class="col">Zip</th>                        <th class="col">Request Status</th>                        <th class="col">Physician</th>                        <th class="col">Physician Notes</th>                        <th class="col">Cancelled by Provider Note</th>                        <th class="col">Admin Note</th>                        <th class="col">Patient Note</th>                        <th class="col">Delete Permanently</th>                    </tr>                </thead>                <tbody>                    <tr>                        <td colspan="15" style="text-align:center;">No Request Found</td>                    </tr>                </tbody>            </table>        }    </div></div><script>    $(document).ready(function () {        $('.searchRecordTable').DataTable({            "destroy": true,            "pageLength": 5,            "pagingType": "full",            language: {                oPaginate: {                    sNext: '<i class="bi bi-caret-right-fill text-info"></i>',                    sPrevious: '<i class="bi bi-caret-left-fill text-info"></i>'                }            }        });        $('.dataTables_length').hide();        $('.dataTables_filter').hide();    });       function recordDltBtn(reqId){        $.ajax({            url: "/adminDashboard/recordDltBtn",            data: { reqId: reqId },            type: 'POST',            success: function (result) {                searchRecords();
            },            error: function () {                alert("Error");
            },        });
    }    function searchRecordSearchBtn() {        var arrayMain = $("#searchRecordForm").serializeArray();        console.log(arrayMain)        event.preventDefault();        $.ajax({            url: "/adminDashboard/searchRecords",            data: arrayMain,            type: 'POST',            success: function (result) {                $("#content").html(result);            },            error: function () {                alert("Error");            },        });    }    function ScheduleExportAll(){        var arrayMain = $("#searchRecordForm").serializeArray();        event.preventDefault();        $.ajax({            url: "/adminDashboard/ScheduleExportAll",            data: arrayMain,            type: 'POST',            xhrFields: {                responseType: 'blob' // Set the response type to blob for binary data            },            success: function (result) {                var blob = new Blob([result], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });                var link = document.createElement('a');                link.href = window.URL.createObjectURL(blob);                link.download = 'Requests.xlsx';                document.body.appendChild(link);                link.click();                document.body.removeChild(link);            },            error: function () {                alert("Error");            },        });    }</script>